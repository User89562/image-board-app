"use strict";(self.webpackChunkimage_board_app=self.webpackChunkimage_board_app||[]).push([[221],{3221:(Nt,oe,a)=>{a.r(oe),a.d(oe,{HomeModule:()=>Pt});var fe=a(4834),c=a(9808),p=a(1083);class J{constructor(){this.archive=[],this.skipped=[],this.delete=[]}}var se=a(4128),re=a(9019),Z=(()=>{return(i=Z||(Z={})).waiting="waiting",i.finished="done",i.failed="warning",i.error="error",i.redirect="redirect",i.addAnother="add another",i.cancel="cancel",Z;var i})(),I=(()=>{return(i=I||(I={}))[i.DIRECTION_NONE=0]="DIRECTION_NONE",i[i.DIRECTION_LEFT=2]="DIRECTION_LEFT",i[i.DIRECTION_RIGHT=4]="DIRECTION_RIGHT",i[i.DIRECTION_UP=8]="DIRECTION_UP",i[i.DIRECTION_DOWN=16]="DIRECTION_DOWN",I;var i})();class M{constructor(){}static get messageType(){return Z}static get swipeDirection(){return I}}var u=a(1777),h=a(8966),e=a(5e3),d=a(7423),v=a(4623),y=a(6473),l=a(7093);function _e(i,o){1&i&&e._UZ(0,"mat-divider")}function ve(i,o){if(1&i&&(e.TgZ(0,"mat-list")(1,"mat-list-item"),e._uU(2),e.qZA()()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",t,"")}}function ye(i,o){if(1&i&&(e.TgZ(0,"div",7)(1,"div"),e.YNc(2,ve,3,1,"mat-list",8),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.data.messageArray)}}let Ce=(()=>{class i{constructor(t,n){this.dialogRef=t,this.data=n}onClick(){this.dialogRef.close()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(h.so),e.Y36(h.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-dialog-filter-confirmation"]],decls:11,vars:5,consts:[["mat-dialog-title","",1,"title"],[4,"ngIf"],["mat-dialog-content","","class","dialog-content",4,"ngIf"],["mat-dialog-actions","","fxLayout.lt-md","column","fxLayoutAlign.gt-sm","end","fxLayoutGap.lt-md","7px",1,"dialog-action"],["mat-raised-button","",1,"cancel-button",3,"click"],["mat-raised-button","","cdkFocusInitial","",1,"yes-button",3,"mat-dialog-close"],["mat-raised-button","","color","primary","cdkFocusInitial","",1,"continue-button",3,"mat-dialog-close"],["mat-dialog-content","",1,"dialog-content"],[4,"ngFor","ngForOf"]],template:function(t,n){1&t&&(e.TgZ(0,"h1",0),e._uU(1),e.qZA(),e.YNc(2,_e,1,0,"mat-divider",1),e.YNc(3,ye,3,1,"div",2),e.TgZ(4,"div",3)(5,"button",4),e.NdJ("click",function(){return n.onClick()}),e._uU(6,"Cancel"),e.qZA(),e.TgZ(7,"button",5),e._uU(8,"Commit"),e.qZA(),e.TgZ(9,"button",6),e._uU(10,"Commit & Continue"),e.qZA()()),2&t&&(e.xp6(1),e.Oqu(n.data.title),e.xp6(1),e.Q6J("ngIf",n.data.messageArray.length>0),e.xp6(1),e.Q6J("ngIf",n.data.messageArray.length>0),e.xp6(4),e.Q6J("mat-dialog-close","commit"),e.xp6(2),e.Q6J("mat-dialog-close","continue"))},dependencies:[c.sg,c.O5,d.lW,v.i$,v.Tg,y.d,h.ZT,h.uh,h.xY,h.H8,l.xw,l.SQ,l.Wh],styles:[".mat-dialog-container[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.mat-list-item[_ngcontent-%COMP%]{height:max-content!important}.mat-divider[_ngcontent-%COMP%]{padding:7px}.title[_ngcontent-%COMP%]{color:#b085f5}.dialog-action[_ngcontent-%COMP%]{margin-top:35px!important;border-top:1px solid gray}.dialog-content[_ngcontent-%COMP%]{margin-top:15px}.yes-button[_ngcontent-%COMP%], .cancel-button[_ngcontent-%COMP%]{font-size:11px;width:100px}.continue-button[_ngcontent-%COMP%]{color:#fff}.yes-button[_ngcontent-%COMP%]{background-color:#a00037!important}.cancel-button[_ngcontent-%COMP%]{background-color:#4b636e!important}"]}),i})();var _=a(5245);function xe(i,o){if(1&i&&(e.TgZ(0,"a",3)(1,"mat-icon"),e._uU(2),e.qZA(),e._uU(3),e.qZA()),2&i){const t=o.$implicit;e.Q6J("mat-dialog-close",t.listItem),e.xp6(2),e.hij(" ",t.icon," "),e.xp6(1),e.hij(" ",t.name," ")}}let Fe=(()=>{class i{constructor(t,n){this.dialogRef=t,this.data=n}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(h.so),e.Y36(h.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-action-list-dialog"]],decls:8,vars:3,consts:[["mat-list-item","",3,"mat-dialog-close",4,"ngFor","ngForOf"],[1,"action-button"],["mat-flat-button","",1,"cancel-button",3,"mat-dialog-close"],["mat-list-item","",3,"mat-dialog-close"]],template:function(t,n){1&t&&(e.TgZ(0,"h1"),e._uU(1),e.qZA(),e._UZ(2,"mat-divider"),e.TgZ(3,"mat-nav-list"),e.YNc(4,xe,4,3,"a",0),e.qZA(),e.TgZ(5,"div",1)(6,"button",2),e._uU(7," Cancel "),e.qZA()()),2&t&&(e.xp6(1),e.hij(" ",n.data.title," "),e.xp6(3),e.Q6J("ngForOf",n.data.listData),e.xp6(2),e.Q6J("mat-dialog-close",!0))},dependencies:[c.sg,d.lW,v.Hk,v.Tg,y.d,h.ZT,_.Hw],styles:[".action-button[_ngcontent-%COMP%]{display:flex;justify-content:right;margin-top:5px}.cancel-button[_ngcontent-%COMP%]{background-color:#1c313a}.mat-icon[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}"]}),i})();var Y=a(508);function be(i,o){1&i&&e._UZ(0,"mat-divider",3)}function Te(i,o){if(1&i&&(e.TgZ(0,"p",9),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t," ")}}function Oe(i,o){if(1&i&&(e.TgZ(0,"div",6)(1,"div",7),e.YNc(2,Te,2,1,"p",8),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.data.messageArray)}}let Q=(()=>{class i{constructor(t,n){this.dialogRef=t,this.data=n,n.color&&(this.color=n.color)}onClick(){this.dialogRef.close()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(h.so),e.Y36(h.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-dialog-message-box"]],decls:8,vars:5,consts:[["mat-dialog-title","",1,"title"],["id","dark-mode-divider",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["id","dark-mode-divider"],["mat-dialog-actions","",1,"dialog-action"],["mat-raised-button","","color","warn",3,"click"],["mat-dialog-content",""],["fxLayoutAlign","start center"],["matLine","","fxLayoutAlign","center center",4,"ngFor","ngForOf"],["matLine","","fxLayoutAlign","center center"]],template:function(t,n){1&t&&(e.TgZ(0,"h1",0),e._uU(1),e.qZA(),e.YNc(2,be,1,0,"mat-divider",1),e.YNc(3,Oe,3,1,"div",2),e._UZ(4,"mat-divider",3),e.TgZ(5,"div",4)(6,"button",5),e.NdJ("click",function(){return n.onClick()}),e._uU(7,"Ok"),e.qZA()()),2&t&&(e.Udp("color",n.color),e.xp6(1),e.Oqu(n.data.title),e.xp6(1),e.Q6J("ngIf",n.data.messageArray.length>0),e.xp6(1),e.Q6J("ngIf",n.data.messageArray.length>0))},dependencies:[c.sg,c.O5,d.lW,Y.X2,y.d,h.uh,h.xY,h.H8,l.Wh],styles:[".mat-list-item[_ngcontent-%COMP%]{padding:2px}.title[_ngcontent-%COMP%]{text-shadow:0 0 1px black}.mat-divider[_ngcontent-%COMP%]{padding:3px}.dialog-action[_ngcontent-%COMP%]{margin-top:5px!important;justify-content:flex-end}.mat-dialog-content[_ngcontent-%COMP%]{white-space:pre-wrap!important}"]}),i})();function we(i,o){1&i&&e._UZ(0,"mat-divider")}function Ae(i,o){if(1&i&&(e.TgZ(0,"mat-list")(1,"mat-list-item"),e._uU(2),e.qZA()()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",t,"")}}function Se(i,o){if(1&i&&(e.TgZ(0,"div",6)(1,"div"),e.YNc(2,Ae,3,1,"mat-list",7),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.data.messageArray)}}let Ze=(()=>{class i{constructor(t,n){this.dialogRef=t,this.data=n}onClick(){this.dialogRef.close()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(h.so),e.Y36(h.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-dialog-confirmation-box"]],decls:9,vars:4,consts:[["mat-dialog-title","",1,"title"],[4,"ngIf"],["mat-dialog-content","","class","dialog-content",4,"ngIf"],["mat-dialog-actions","",1,"dialog-action"],["mat-raised-button","",1,"cancel-button",3,"click"],["mat-raised-button","","cdkFocusInitial","",1,"yes-button",3,"mat-dialog-close"],["mat-dialog-content","",1,"dialog-content"],[4,"ngFor","ngForOf"]],template:function(t,n){1&t&&(e.TgZ(0,"h1",0),e._uU(1),e.qZA(),e.YNc(2,we,1,0,"mat-divider",1),e.YNc(3,Se,3,1,"div",2),e.TgZ(4,"div",3)(5,"button",4),e.NdJ("click",function(){return n.onClick()}),e._uU(6,"Cancel"),e.qZA(),e.TgZ(7,"button",5),e._uU(8,"Yes"),e.qZA()()),2&t&&(e.xp6(1),e.Oqu(n.data.title),e.xp6(1),e.Q6J("ngIf",n.data.messageArray.length>0),e.xp6(1),e.Q6J("ngIf",n.data.messageArray.length>0),e.xp6(4),e.Q6J("mat-dialog-close",!0))},dependencies:[c.sg,c.O5,d.lW,v.i$,v.Tg,y.d,h.ZT,h.uh,h.xY,h.H8],styles:[".mat-dialog-container[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.mat-list-item[_ngcontent-%COMP%]{height:max-content!important}.mat-divider[_ngcontent-%COMP%]{padding:7px}.title[_ngcontent-%COMP%]{color:#b085f5}.dialog-action[_ngcontent-%COMP%]{margin-top:35px!important;justify-content:flex-end;border-top:1px solid gray}.dialog-content[_ngcontent-%COMP%]{margin-top:15px}.yes-button[_ngcontent-%COMP%], .cancel-button[_ngcontent-%COMP%]{font-size:11px;width:100px}.yes-button[_ngcontent-%COMP%]{background-color:#a00037!important}.cancel-button[_ngcontent-%COMP%]{background-color:#4b636e!important}"]}),i})();class H{constructor(o){this.dialog=o}displayError(o,t){let n=[];n="string"==typeof o?[o]:o,this.dialog.open(Q,{data:{messageArray:n,title:t,color:"#E57373"}})}displayMessage(o,t,n){let s=[];return s="string"==typeof o?[o]:o,this.dialog.open(Q,n?{data:{messageArray:s,title:t,color:n},restoreFocus:!1}:{data:{messageArray:s,title:t},restoreFocus:!1})}displayConfirmation(o,t){let n=[];return n="string"==typeof o?[o]:o,this.dialog.open(Ze,{data:{messageArray:n,title:t}})}displayFilterConfirmation(o,t){let n=[];return n="string"==typeof o?[o]:o,this.dialog.open(Ce,{data:{messageArray:n,title:t}})}displayList(o){return this.dialog.open(Fe,{data:o,autoFocus:!1})}mapToArray(o){const t=[];for(const n of o.entries())t.push("regex"===n[0]?n[0]+" : "+JSON.stringify(n[1]):n[0]+" : "+n[1]);return t}}const Ie=[(0,u.oB)({transform:"translate3d(0, 0, 0)",offset:0}),(0,u.oB)({transform:"translate3d(-150%, 0, 0)",opacity:0,offset:1})],Me=[(0,u.oB)({transform:"translate3d(0, 0, 0)",offset:0}),(0,u.oB)({transform:"translate3d(150%, 0, 0)",opacity:0,offset:1})];var j=a(7579);let F=(()=>{class i{constructor(){this.processingSource=new e.vpe,this.overlaySource=new j.x,this.fullscreenOverlaySource=new j.x,this.sendFilesSource=new j.x,this.proccessingFound$=this.processingSource.asObservable(),this.overlaySourceFound$=this.overlaySource.asObservable(),this.fullscreenOverlaySourceFound$=this.fullscreenOverlaySource.asObservable(),this.sendFilesSourceFound$=this.sendFilesSource.asObservable()}announceProcessing(t){this.processingSource.emit(t)}announceFullscreenOverlay(t){this.fullscreenOverlaySource.next(t)}closeFullscreenOverlay(t){this.sendFilesSource.next(t)}closeOverlay(t){this.overlaySource.next(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var R=a(773);function ke(i,o){1&i&&e._UZ(0,"mat-spinner")}function De(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"img",8),e.NdJ("load",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.onLoad())}),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("hidden",t.loading&&!t.complete)("src",t.currentFile.file_url,e.LSH)}}function Ue(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"video",9),e.NdJ("loadeddata",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.onLoad())}),e._UZ(1,"source",10),e._uU(2," Your browser does not support the video tag. "),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("hidden",t.loading&&!t.complete),e.xp6(1),e.Q6J("src",t.currentFile.file_url,e.LSH)("type",t.currentFile.mime)}}function Le(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",4),e.NdJ("swipe",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.onSwipe(s))})("@cardAnimator.done",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.resetAnimationState(s))})("swipeleft",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.startAnimation("slideOutLeft"))})("swiperight",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.startAnimation("slideOutRight"))}),e.YNc(1,ke,1,0,"mat-spinner",5),e.YNc(2,De,2,2,"div",6),e.YNc(3,Ue,3,3,"ng-template",null,7,e.W1O),e.qZA()}if(2&i){const t=e.MAs(4),n=e.oxw();e.Q6J("@cardAnimator",n.animationState),e.xp6(1),e.Q6J("ngIf",n.loading),e.xp6(1),e.Q6J("ngIf",n.imageType(n.currentFile.mime))("ngIfElse",t)}}let Pe=(()=>{class i{constructor(t,n){this.injectorService=t,this.loading=!0,this.enumUtil=M,this.complete=!1,this.animationState="",this.fileChanges=new J,this.dialogUtils=new H(n),this.subscriptions=[],this.hydrusFiles=[],this.currentFileIndex=0}ngOnDestroy(){this.subscriptions.forEach(t=>{t.unsubscribe()})}ngOnInit(){this.loading=!0,this.subscriptions.push(this.injectorService.fullscreenOverlaySourceFound$.subscribe(t=>{this.hydrusFiles=t.files,this.currentFileIndex=t.currentIndex,this.currentFile=this.hydrusFiles[this.currentFileIndex]}))}onSwipe(t){t.direction===this.enumUtil.swipeDirection.DIRECTION_LEFT?this.sendToArchive():t.direction===this.enumUtil.swipeDirection.DIRECTION_RIGHT?this.sendToDelete():t.direction===this.enumUtil.swipeDirection.DIRECTION_UP?this.sendToPrevious():t.direction===this.enumUtil.swipeDirection.DIRECTION_DOWN&&this.sendToSkip()}onLoad(){this.loading=!1}sendToDelete(){this.fileChanges.delete.push(this.currentFile),this.currentFileIndex+1<this.hydrusFiles.length?setTimeout(()=>this.nextImage(),500):this.sendSelectedFiles()}sendToArchive(){this.fileChanges.archive.push(this.currentFile),this.currentFileIndex+1<this.hydrusFiles.length?setTimeout(()=>this.nextImage(),500):this.sendSelectedFiles()}sendToSkip(){this.fileChanges.skipped.push(this.currentFile),this.currentFileIndex+1<this.hydrusFiles.length?setTimeout(()=>this.nextImage(),500):this.sendSelectedFiles()}sendToPrevious(){this.currentFileIndex-1>=0&&(this.currentFileIndex--,this.currentFile=this.hydrusFiles[this.currentFileIndex]),this.fileChanges.archive.includes(this.currentFile)?this.fileChanges.archive.splice(this.fileChanges.archive.indexOf(this.currentFile),1):this.fileChanges.delete.includes(this.currentFile)?this.fileChanges.delete.splice(this.fileChanges.delete.indexOf(this.currentFile),1):this.fileChanges.skipped.includes(this.currentFile)&&this.fileChanges.skipped.splice(this.fileChanges.skipped.indexOf(this.currentFile),1)}nextImage(){this.loading=!0,this.currentFile=this.hydrusFiles[this.currentFileIndex+1],this.currentFileIndex++}closeFullscreen(){this.fileChanges.archive.length>0||this.fileChanges.delete.length>0?this.dialogUtils.displayConfirmation("Would you like to commit current changes?","Filtering Cancelled").afterClosed().subscribe(n=>{this.injectorService.closeFullscreenOverlay(n?{files:this.fileChanges,makeChanges:!0,continueFilter:!1}:{files:this.fileChanges,makeChanges:!1,continueFilter:!1})}):this.injectorService.closeFullscreenOverlay({files:this.fileChanges,makeChanges:!1,continueFilter:!1})}sendSelectedFiles(){this.loading=!0,this.dialogUtils.displayFilterConfirmation("Would you like to commit current changes?","Filtering Complete").afterClosed().subscribe(n=>{this.injectorService.closeFullscreenOverlay("continue"===n?{files:this.fileChanges,makeChanges:!0,continueFilter:!0}:"commit"===n?{files:this.fileChanges,makeChanges:!0,continueFilter:!1}:{files:this.fileChanges,makeChanges:!1,continueFilter:!1})})}startAnimation(t){this.animationState||(this.animationState=t)}resetAnimationState(t){this.animationState=""}imageType(t){return!t.includes("video")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F),e.Y36(h.uw))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-overlay-archive-delete-filter-mobile"]],decls:7,vars:3,consts:[[1,"main-container"],["mat-icon-button","",1,"close-fullscreen-button",3,"click"],["fxLayoutAlign","center center","class","custom-swiper-container",3,"swipe","swipeleft","swiperight",4,"ngIf"],[1,"num-files-container"],["fxLayoutAlign","center center",1,"custom-swiper-container",3,"swipe","swipeleft","swiperight"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["video",""],["draggable","false",1,"current-image",3,"hidden","src","load"],["controls","","muted","",1,"current-video",3,"hidden","loadeddata"],[3,"src","type"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return n.closeFullscreen()}),e.TgZ(2,"mat-icon"),e._uU(3,"close"),e.qZA()(),e.YNc(4,Le,5,4,"div",2),e.TgZ(5,"div",3),e._uU(6),e.qZA()()),2&t&&(e.xp6(4),e.Q6J("ngIf",n.hydrusFiles&&n.currentFile),e.xp6(2),e.AsE(" ",n.currentFileIndex+1," / ",n.hydrusFiles.length," "))},dependencies:[c.O5,d.lW,R.Ou,_.Hw,l.Wh],styles:[".custom-swiper-container[_ngcontent-%COMP%]{height:96vh;width:96vw}.current-image[_ngcontent-%COMP%]{height:95vh;width:95vw;object-position:center;object-fit:contain}.current-video[_ngcontent-%COMP%]{height:90vh;width:90vw;object-position:center;object-fit:contain}.close-fullscreen-button[_ngcontent-%COMP%]{color:#ff4500;position:absolute;right:30px;top:10;font-size:35px;height:35px;width:35px;line-height:35px}.close-fullscreen-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:35px;height:35px;width:35px;line-height:35px}.num-files-container[_ngcontent-%COMP%]{position:absolute;right:15px;bottom:15px}"],data:{animation:[(0,u.X$)("cardAnimator",[(0,u.eR)("* => slideOutLeft",(0,u.jt)(655,(0,u.F4)(Ie))),(0,u.eR)("* => slideOutRight",(0,u.jt)(655,(0,u.F4)(Me)))])]}}),i})();const Ne=[(0,u.oB)({transform:"translate3d(0, 0, 0)",offset:0}),(0,u.oB)({transform:"translate3d(-150%, 0, 0)",opacity:0,offset:1})],Je=[(0,u.oB)({transform:"translate3d(0, 0, 0)",offset:0}),(0,u.oB)({transform:"translate3d(150%, 0, 0)",opacity:0,offset:1})];function Ye(i,o){1&i&&e._UZ(0,"mat-spinner")}function Qe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"img",12),e.NdJ("load",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.onLoad())}),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("hidden",t.loading&&!t.complete)("src",t.currentFile.file_url,e.LSH)}}function He(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"video",13),e.NdJ("loadeddata",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.onLoad())}),e._UZ(1,"source",14),e._uU(2," Your browser does not support the video tag. "),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("hidden",t.loading&&!t.complete),e.xp6(1),e.Q6J("src",t.currentFile.file_url,e.LSH)("type",t.currentFile.mime)}}function je(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",8),e.NdJ("swipe",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.onSwipe(s))})("@cardAnimator.done",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.resetAnimationState(s))})("swipeleft",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.startAnimation("slideOutLeft"))})("swiperight",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.startAnimation("slideOutRight"))}),e.YNc(1,Ye,1,0,"mat-spinner",9),e.YNc(2,Qe,2,2,"div",10),e.YNc(3,He,3,3,"ng-template",null,11,e.W1O),e.qZA()}if(2&i){const t=e.MAs(4),n=e.oxw();e.Q6J("@cardAnimator",n.animationState),e.xp6(1),e.Q6J("ngIf",n.loading),e.xp6(1),e.Q6J("ngIf",n.imageType(n.currentFile.mime))("ngIfElse",t)}}let Re=(()=>{class i{constructor(t,n){this.injectorService=t,this.loading=!0,this.enumUtil=M,this.complete=!1,this.animationState="",this.fileChanges=new J,this.dialogUtils=new H(n),this.subscriptions=[],this.hydrusFiles=[],this.currentFileIndex=0}ngOnDestroy(){this.subscriptions.forEach(t=>{t.unsubscribe()})}ngOnInit(){this.loading=!0,this.subscriptions.push(this.injectorService.fullscreenOverlaySourceFound$.subscribe(t=>{this.hydrusFiles=t.files,this.currentFileIndex=t.currentIndex,this.currentFile=this.hydrusFiles[this.currentFileIndex],t.currentFileChanges&&(this.fileChanges=t.currentFileChanges)}))}onSwipe(t){t.direction===this.enumUtil.swipeDirection.DIRECTION_LEFT?this.sendToArchive():t.direction===this.enumUtil.swipeDirection.DIRECTION_RIGHT?this.sendToDelete():t.direction===this.enumUtil.swipeDirection.DIRECTION_UP?this.sendToPrevious():t.direction===this.enumUtil.swipeDirection.DIRECTION_DOWN&&this.sendToSkip()}onLoad(){this.loading=!1}sendToDelete(){this.fileChanges.delete.push(this.currentFile),this.currentFileIndex+1<this.hydrusFiles.length?setTimeout(()=>this.nextImage(),500):this.sendSelectedFiles()}sendToArchive(){this.fileChanges.archive.push(this.currentFile),this.currentFileIndex+1<this.hydrusFiles.length?setTimeout(()=>this.nextImage(),500):this.sendSelectedFiles()}sendToSkip(){this.fileChanges.skipped.push(this.currentFile),this.currentFileIndex+1<this.hydrusFiles.length?setTimeout(()=>this.nextImage(),500):this.sendSelectedFiles()}sendToPrevious(){this.currentFileIndex-1>=0&&(this.currentFileIndex--,this.currentFile=this.hydrusFiles[this.currentFileIndex]),this.fileChanges.archive.includes(this.currentFile)?this.fileChanges.archive.splice(this.fileChanges.archive.indexOf(this.currentFile),1):this.fileChanges.delete.includes(this.currentFile)?this.fileChanges.delete.splice(this.fileChanges.delete.indexOf(this.currentFile),1):this.fileChanges.skipped.includes(this.currentFile)&&this.fileChanges.skipped.splice(this.fileChanges.skipped.indexOf(this.currentFile),1)}nextImage(){this.loading=!0,this.currentFile=this.hydrusFiles[this.currentFileIndex+1],this.currentFileIndex++}closeFullscreen(){this.fileChanges.archive.length>0||this.fileChanges.delete.length>0?this.dialogUtils.displayConfirmation("Would you like to commit current changes?","Filtering Cancelled").afterClosed().subscribe(n=>{this.injectorService.closeFullscreenOverlay(n?{files:this.fileChanges,makeChanges:!0,continueFilter:!1}:{files:this.fileChanges,makeChanges:!1,continueFilter:!1})}):this.injectorService.closeFullscreenOverlay({files:this.fileChanges,makeChanges:!1,continueFilter:!1})}sendSelectedFiles(){this.loading=!0,this.dialogUtils.displayFilterConfirmation("Would you like to commit current changes?","Filtering Complete").afterClosed().subscribe(n=>{this.injectorService.closeFullscreenOverlay("continue"===n?{files:this.fileChanges,makeChanges:!0,continueFilter:!0}:"commit"===n?{files:this.fileChanges,makeChanges:!0,continueFilter:!1}:{files:this.fileChanges,makeChanges:!1,continueFilter:!1})})}startAnimation(t){this.animationState||(this.animationState=t)}resetAnimationState(t){this.animationState=""}imageType(t){return!t.includes("video")}handleKeyDown(t){t.preventDefault(),"ArrowDown"===t.key?this.sendToPrevious():"ArrowUp"===t.key?this.sendToSkip():"ArrowRight"===t.key?this.sendToArchive():"ArrowLeft"===t.key?this.sendToDelete():"Escape"===t.key&&this.closeFullscreen()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F),e.Y36(h.uw))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-overlay-archive-delete-filter"]],hostBindings:function(t,n){1&t&&e.NdJ("keydown",function(r){return n.handleKeyDown(r)},!1,e.Jf7)},decls:19,vars:3,consts:[[1,"main-container"],["mat-icon-button","",1,"close-fullscreen-button",3,"click"],["fxLayoutAlign","center center","class","custom-swiper-container",3,"swipe","swipeleft","swiperight",4,"ngIf"],["mat-icon-button","",1,"delete-button",3,"click"],["mat-icon-button","",1,"archive-button",3,"click"],["mat-icon-button","",1,"skip-button",3,"click"],["mat-icon-button","",1,"previous-button",3,"click"],[1,"num-files-container"],["fxLayoutAlign","center center",1,"custom-swiper-container",3,"swipe","swipeleft","swiperight"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["video",""],["draggable","false",1,"current-image",3,"hidden","src","load"],["controls","","muted","",1,"current-video",3,"hidden","loadeddata"],[3,"src","type"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return n.closeFullscreen()}),e.TgZ(2,"mat-icon"),e._uU(3,"close"),e.qZA()(),e.YNc(4,je,5,4,"div",2),e.TgZ(5,"button",3),e.NdJ("click",function(){return n.sendToDelete()}),e.TgZ(6,"mat-icon"),e._uU(7,"delete"),e.qZA()(),e.TgZ(8,"button",4),e.NdJ("click",function(){return n.sendToArchive()}),e.TgZ(9,"mat-icon"),e._uU(10,"archive"),e.qZA()(),e.TgZ(11,"button",5),e.NdJ("click",function(){return n.sendToSkip()}),e.TgZ(12,"mat-icon"),e._uU(13,"skip_next"),e.qZA()(),e.TgZ(14,"button",6),e.NdJ("click",function(){return n.sendToPrevious()}),e.TgZ(15,"mat-icon"),e._uU(16,"arrow_back"),e.qZA()(),e.TgZ(17,"div",7),e._uU(18),e.qZA()()),2&t&&(e.xp6(4),e.Q6J("ngIf",n.hydrusFiles&&n.currentFile),e.xp6(14),e.AsE(" ",n.currentFileIndex+1," / ",n.hydrusFiles.length," "))},dependencies:[c.O5,d.lW,R.Ou,_.Hw,l.Wh],styles:[".custom-swiper-container[_ngcontent-%COMP%]{height:90vh;width:90vw;padding:5px}.current-image[_ngcontent-%COMP%]{height:85vh;max-width:80vw;object-position:center;object-fit:contain}.current-video[_ngcontent-%COMP%]{width:90vw;height:85vh;object-position:center;object-fit:contain}.archive-button[_ngcontent-%COMP%]{position:absolute;height:80%;width:55px;top:9%;right:25px}.delete-button[_ngcontent-%COMP%]{position:absolute;height:80%;width:55px;left:25px;top:9%}.skip-button[_ngcontent-%COMP%]{position:absolute;width:80%;top:0;right:10%}.previous-button[_ngcontent-%COMP%]{position:absolute;width:80%;bottom:15px;right:10%}.archive-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .delete-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .skip-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .previous-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:55px;height:55px;width:55px;line-height:55px;color:#00b0ff;text-shadow:0px 0px 1px black}.close-fullscreen-button[_ngcontent-%COMP%]{color:#ff4500;position:absolute;right:30px;top:25;font-size:35px;height:35px;width:35px;line-height:35px}.close-fullscreen-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:35px;height:35px;width:35px;line-height:35px}.num-files-container[_ngcontent-%COMP%]{position:absolute;right:15px;bottom:15px}"],data:{animation:[(0,u.X$)("cardAnimator",[(0,u.eR)("* => slideOutLeft",(0,u.jt)(855,(0,u.F4)(Ne))),(0,u.eR)("* => slideOutRight",(0,u.jt)(855,(0,u.F4)(Je)))])]}}),i})();var b=a(9224),qe=a(226);function Be(i,o){1&i&&(e.TgZ(0,"span",17),e._UZ(1,"mat-spinner",18),e.qZA())}function We(i,o){if(1&i&&(e.TgZ(0,"span",17)(1,"mat-icon"),e._uU(2),e.qZA()()),2&i){const t=e.oxw(2).$implicit;e.xp6(2),e.Oqu(t.value)}}function $e(i,o){if(1&i&&(e.TgZ(0,"div",11)(1,"h2",12),e._uU(2),e.qZA(),e.TgZ(3,"div",13),e.YNc(4,Be,2,0,"span",14),e.YNc(5,We,3,1,"ng-template",15,16,e.W1O),e.qZA()()),2&i){const t=e.MAs(6),n=e.oxw().$implicit;e.xp6(2),e.hij("",n.key," ..."),e.xp6(2),e.Q6J("ngIf","waiting"===n.value)("ngIfElse",t)}}function Ke(i,o){if(1&i&&(e.TgZ(0,"div",19)(1,"h2",20)(2,"span",21),e._uU(3,"An Error has occured"),e.qZA(),e._uU(4,": "),e.qZA(),e.TgZ(5,"p"),e._uU(6),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(6),e.Oqu(t.value)}}function Ge(i,o){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,$e,7,3,"div",9),e.YNc(2,Ke,7,1,"ng-template",null,10,e.W1O),e.qZA()),2&i){const t=o.$implicit,n=e.MAs(3);e.xp6(1),e.Q6J("ngIf","error"!==t.key)("ngIfElse",n)}}function Ee(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.closeOverlay(s.enumUtil.messageType.addAnother))}),e._uU(1," Another"),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA()()}if(2&i){const t=e.oxw();e.Q6J("disabled",!(t.isComplete()===t.processingStates.error||t.isComplete()===t.processingStates.complete))}}var k=(()=>{return(i=k||(k={}))[i.processing=0]="processing",i[i.error=1]="error",i[i.complete=2]="complete",k;var i})();let ze=(()=>{class i{constructor(t,n){this.injectorService=t,this.router=n,this.subscriptions=[],this.enumUtil=M,this.displayAdd=!1,this.errorFound=!1,-1!=this.router.url.search("add")&&(this.displayAdd=!0)}ngOnDestroy(){this.subscriptions.forEach(t=>{t.unsubscribe()})}ngOnInit(){this.subscriptions.push(this.injectorService.proccessingFound$.subscribe(t=>{this.items=t}))}get processingStates(){return k}isComplete(){let t=0,n=0;if(this.items)for(const s of this.items.keys()){if(t++,s===this.enumUtil.messageType.error)return this.errorFound=!0,this.processingStates.error;this.items.get(s)===this.enumUtil.messageType.finished&&n++}return t===n&&0!=t?this.processingStates.complete:this.processingStates.processing}closeOverlay(t){this.injectorService.closeOverlay(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F),e.Y36(p.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-overlay"]],decls:15,vars:5,consts:[["fxLayoutAlign","center center","fxFlexFill",""],["fxLayout","column",1,"message-box"],["fxLayoutAlign","center center"],["id","dark-mode-divider",1,"card-divider"],["fxLayoutAlign","center","fxLayout","column","fxFlex",""],[4,"ngFor","ngForOf"],["fxLayoutGap","5px","dir","rtl"],["mat-raised-button","","color","accent",3,"disabled","click"],["mat-raised-button","","color","accent",3,"disabled","click",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","5px",4,"ngIf","ngIfElse"],["errorBlock",""],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","5px"],["fxFlex","70",1,"item-key"],["fxLayoutAlign","start start"],["class","item-status",4,"ngIf","ngIfElse"],["class","item-status"],["elseBlock",""],[1,"item-status"],["diameter","20"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","5px","fxLayout","column"],["fxFlex","90",1,"error-message"],[1,"error-color"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"mat-card",1)(2,"mat-card-header",2)(3,"mat-card-title")(4,"h1"),e._uU(5,"Please wait ..."),e.qZA()()(),e._UZ(6,"mat-divider",3),e.TgZ(7,"mat-card-content",4),e.YNc(8,Ge,4,2,"div",5),e.ALo(9,"keyvalue"),e.qZA(),e._UZ(10,"mat-divider",3),e.TgZ(11,"mat-card-actions",6)(12,"button",7),e.NdJ("click",function(){return n.closeOverlay(n.errorFound?n.enumUtil.messageType.error:n.enumUtil.messageType.redirect)}),e._uU(13," Ok "),e.qZA(),e.YNc(14,Ee,4,1,"button",8),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("ngForOf",e.lcZ(9,3,n.items)),e.xp6(4),e.Q6J("disabled",!(n.isComplete()===n.processingStates.error||n.isComplete()===n.processingStates.complete)),e.xp6(2),e.Q6J("ngIf",n.displayAdd))},dependencies:[c.sg,c.O5,b.a8,b.dk,b.dn,b.n5,b.hq,qe.Lv,d.lW,y.d,R.Ou,_.Hw,l.xw,l.SQ,l.Wh,l.s9,l.yH,c.Nd],styles:[".message-box[_ngcontent-%COMP%]{height:auto;width:30vw;background-color:#616161;color:#f5f5f5}.mat-card-content[_ngcontent-%COMP%]{margin-top:10px}.item-status[_ngcontent-%COMP%]{margin-left:5px;margin-top:-10px}.item-key[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.error-color[_ngcontent-%COMP%]{color:#e53935}.error-message[_ngcontent-%COMP%]{text-align:center}.card-divider[_ngcontent-%COMP%]{position:unset!important}"]}),i})();var A=a(1314),q=a(7429);class ae{constructor(o,t){this.viewContainerRef=o,this.overlay=t}createProcessingOverlay(){const o=new A.X_;o.positionStrategy=this.overlay.position().global().centerHorizontally().centerVertically(),o.hasBackdrop=!0,this.overlayRef=this.overlay.create(o);const t=new q.C5(ze,this.viewContainerRef);this.overlayRef.attach(t)}createFullscreenOverlay(){const o=new A.X_;o.positionStrategy=this.overlay.position().global().centerHorizontally().centerVertically(),o.backdropClass="backdrop-class",o.hasBackdrop=!0,this.overlayRef=this.overlay.create(o);const t=new q.C5(Re,this.viewContainerRef);this.overlayRef.attach(t)}createMobileOverlay(){const o=new A.X_;o.positionStrategy=this.overlay.position().global().centerHorizontally().centerVertically(),o.backdropClass="backdrop-class",o.hasBackdrop=!0,this.overlayRef=this.overlay.create(o);const t=new q.C5(Pe,this.viewContainerRef);this.overlayRef.attach(t)}closeOverlay(){this.overlayRef.dispose()}}var le=a(2313),B=a(575),Ve=a(3900),Xe=a(9646),et=a(4004);let W=(()=>{class i{constructor(t){this.apiService=t}getFileWithMetadataFromSearch(t,n,s){return this.apiService.getFilesSearch(t,n,s).pipe((0,Ve.w)(r=>this.getThumbnailAndMetadata(r.file_ids)))}getThumbnailAndMetadata(t){return 0===t.length?(0,Xe.of)([]):this.apiService.getFileMetadata(t).pipe((0,et.U)(n=>n.metadata.map(s=>Object.assign(Object.assign({},s),{thumbnail_url:this.apiService.getThumbnailURLFromHash(s.hash),file_url:this.apiService.getFileURLFromHash(s.hash)}))))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(B.s))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var D=a(3322),tt=a(7238);function it(i,o){1&i&&(e.TgZ(0,"mat-icon"),e._uU(1,"videocam"),e.qZA())}function nt(i,o){1&i&&(e.TgZ(0,"mat-icon"),e._uU(1,"volume_up"),e.qZA())}function ot(i,o){1&i&&(e.TgZ(0,"mat-icon"),e._uU(1," mail"),e.qZA())}function st(i,o){1&i&&(e.TgZ(0,"mat-icon"),e._uU(1," archive"),e.qZA())}function rt(i,o){1&i&&(e.TgZ(0,"mat-icon"),e._uU(1," delete"),e.qZA())}const ce=function(i,o){return{"height.px":i,"width.px":o}};function at(i,o){if(1&i&&e._UZ(0,"img",8),2&i){const t=e.oxw(2);e.Q6J("src",t.hydrusFile.thumbnail_url,e.LSH)("ngStyle",e.WLB(2,ce,t.heightNum,t.widthNum?t.widthNum:t.heightNum))}}function lt(i,o){if(1&i&&e._UZ(0,"img",8),2&i){const t=e.oxw(2);e.Q6J("src",t.hydrusFile.file_url,e.LSH)("ngStyle",e.WLB(2,ce,t.heightNum,t.widthNum?t.widthNum:t.heightNum))}}const ct=function(i){return{"width.px":i}};function ht(i,o){if(1&i&&(e.TgZ(0,"div",1)(1,"mat-card",2)(2,"h3",3),e._uU(3),e.qZA(),e.TgZ(4,"div",4),e.YNc(5,it,2,0,"mat-icon",5),e.YNc(6,nt,2,0,"mat-icon",5),e.YNc(7,ot,2,0,"mat-icon",5),e.YNc(8,st,2,0,"mat-icon",5),e.YNc(9,rt,2,0,"mat-icon",5),e.qZA(),e.YNc(10,at,1,5,"img",6),e.YNc(11,lt,1,5,"ng-template",null,7,e.W1O),e.qZA()()),2&i){const t=e.MAs(12),n=e.oxw();e.xp6(2),e.Q6J("ngStyle",e.VKq(10,ct,n.widthNum?n.widthNum:n.heightNum))("matTooltip",n.determineFileTitle()),e.xp6(1),e.hij(" ",n.determineFileTitle()," "),e.xp6(2),e.Q6J("ngIf",n.hydrusFile.has_audio),e.xp6(1),e.Q6J("ngIf",n.hydrusFile.has_audio),e.xp6(1),e.Q6J("ngIf",n.hydrusFile.is_inbox),e.xp6(1),e.Q6J("ngIf",!n.hydrusFile.is_inbox),e.xp6(1),e.Q6J("ngIf",n.hydrusFile.is_trashed),e.xp6(1),e.Q6J("ngIf",n.thumbnail)("ngIfElse",t)}}let he=(()=>{class i{constructor(){}ngOnInit(){}determineFileTitle(){let t="";return this.hydrusFile.service_names_to_statuses_to_display_tags["all known tags"][0].forEach(n=>{n.includes("series")&&(t+=n.substring(n.indexOf(":")+1)+", ")}),t.trimEnd().slice(0,-1)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-image-display"]],inputs:{hydrusFile:"hydrusFile",heightNum:"heightNum",widthNum:"widthNum",thumbnail:"thumbnail"},decls:1,vars:1,consts:[["fxLayoutAlign","center center","class","card-container",4,"ngIf"],["fxLayoutAlign","center center",1,"card-container"],["id","image-container","fxLayoutAlign","center center","fxLayout","column"],[1,"file-title",3,"ngStyle","matTooltip"],["fxLayout","row"],[4,"ngIf"],["class","image-thumbnail",3,"src","ngStyle",4,"ngIf","ngIfElse"],["hdImage",""],[1,"image-thumbnail",3,"src","ngStyle"]],template:function(t,n){1&t&&e.YNc(0,ht,13,12,"div",0),2&t&&e.Q6J("ngIf",n.hydrusFile)},dependencies:[c.O5,c.PC,b.a8,_.Hw,tt.gM,l.xw,l.Wh,D.Zl],styles:['.image-thumbnail[_ngcontent-%COMP%]{object-fit:contain}.file-title[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-align:center;font-feature-settings:"smcp";font-variant:small-caps;font-weight:700;font-size:20px;margin:0}#image-container[_ngcontent-%COMP%]{padding:0}.video[_ngcontent-%COMP%]{object-fit:fill}']}),i})();const ut=function(i){return{border:i}};function pt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",13)(1,"div",14),e.NdJ("click",function(s){const m=e.CHM(t).$implicit,C=e.oxw();return e.KtG(C.selectFile(m,s))})("auxclick",function(s){const m=e.CHM(t).$implicit,C=e.oxw();return e.KtG(C.onAuxClick(m,s))}),e._UZ(2,"app-image-display",15),e.qZA(),e.TgZ(3,"button",16),e.NdJ("click",function(){const r=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.fullscreenView(r))}),e.TgZ(4,"mat-icon"),e._uU(5,"zoom_in"),e.qZA()()()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngStyle",e.VKq(5,ut,n.isFileSelected(t))),e.xp6(1),e.Q6J("hydrusFile",t)("heightNum","330")("widthNum","365")("thumbnail",!1)}}let dt=(()=>{class i{constructor(t,n,s,r,m,C,E){var S,f,x,O,w,z,V,X,ee,te,ie;this.router=t,this.apiService=s,this.fileService=r,this.injectorService=m,this.sortDir=!0,this.loading=!0,this.enumUtil=M,this.fullscreen=!1,n.setTitle("Archive/Delete | "+re.N.app_name),this.hydrusFiles=[],this.fileChanges=new J,this.subscriptions=[],this.currentIndex=0,this.overlayUtil=new ae(C,E),this.continueFilter=!1,!(null===(S=this.router.getCurrentNavigation())||void 0===S)&&S.extras.state&&(this.hydrusFiles=null===(x=null===(f=this.router.getCurrentNavigation())||void 0===f?void 0:f.extras.state)||void 0===x?void 0:x.files,this.searchTags=null===(w=null===(O=this.router.getCurrentNavigation())||void 0===O?void 0:O.extras.state)||void 0===w?void 0:w.tags,"false"===(null===(V=null===(z=this.router.getCurrentNavigation())||void 0===z?void 0:z.extras.state)||void 0===V?void 0:V.sortDir)&&(this.sortDir=!1),this.sortType=null===(ee=null===(X=this.router.getCurrentNavigation())||void 0===X?void 0:X.extras.state)||void 0===ee?void 0:ee.sortType,this.fullscreen=null===(ie=null===(te=this.router.getCurrentNavigation())||void 0===te?void 0:te.extras.state)||void 0===ie?void 0:ie.fullscreen,this.setSearchParams(),this.saveSearchParams(),this.loading=!1),this.subscriptions.push(this.router.events.subscribe(N=>{var ne;if(N instanceof p.m2&&N.url.includes("?")){this.searchParams=new URLSearchParams(N.url.slice(N.url.indexOf("?"))),this.saveSearchParams();let ge=null===(ne=this.searchParams.get("tags"))||void 0===ne?void 0:ne.split(",");ge&&(this.searchTags=ge);let me=this.searchParams.get("sortType");me&&(this.sortType=+me),"false"===this.searchParams.get("sortDir")&&(this.sortDir=!1),"true"===this.searchParams.get("fullscreen")&&(this.fullscreen=!0)}}))}ngOnDestroy(){this.subscriptions.forEach(t=>{t.unsubscribe()})}ngOnInit(){0===this.hydrusFiles.length&&this.searchFiles()}searchFiles(){this.loading=!0,this.hydrusFiles=[],this.subscriptions.push(this.apiService.getFilesSearch(this.searchTags,this.sortType.toString(),this.sortDir.toString()).subscribe({next:t=>{this.fileService.getThumbnailAndMetadata(t.file_ids).subscribe({next:n=>{this.hydrusFiles=n,this.mobileCurrentImage=this.hydrusFiles[0],this.loading=!1}})}})),this.setSearchParams(),this.saveSearchParams()}setSearchParams(){let t=`?tags=${this.searchTags.flat()}&sortType=${this.sortType}&sortDir=${this.sortDir}&fullscreen=${this.fullscreen}`;this.searchParams=new URLSearchParams(t)}saveSearchParams(){var t=window.location.pathname+"?"+this.searchParams.toString();history.pushState(null,"",t)}selectFile(t,n){this.currentIndex=this.hydrusFiles.indexOf(t),this.fileChanges.archive.includes(t)?this.fileChanges.archive.splice(this.fileChanges.archive.indexOf(t),1):this.fileChanges.archive.push(t)}isFileSelected(t){return this.fileChanges.archive.includes(t)?"8px solid #00e676":this.fileChanges.skipped.includes(t)?"8px solid  #007ac1":"8px solid transparent"}onAuxClick(t,n){this.currentIndex=this.hydrusFiles.indexOf(t),1===n.button&&(this.fileChanges.skipped.includes(t)?this.fileChanges.skipped.splice(this.fileChanges.archive.indexOf(t),1):this.fileChanges.skipped.push(t))}fullscreenView(t){this.overlayUtil.createFullscreenOverlay(),this.setupFileChanges(),setTimeout(()=>this.injectorService.announceFullscreenOverlay({files:this.hydrusFiles,currentIndex:this.hydrusFiles.indexOf(t),currentFileChanges:this.fileChanges}),300),this.subscriptions.push(this.injectorService.sendFilesSourceFound$.subscribe(n=>{n.continueFilter?this.continueFilter=!0:(this.overlayUtil.closeOverlay(),this.continueFilter=!1),n.makeChanges&&n.files.archive.length+n.files.delete.length+n.files.skipped.length===this.hydrusFiles.length?this.updateFileStatuses(n.files):this.fileChanges=n.files}))}determineInboxStatus(t){return this.fileChanges.archive.includes(t)?"archive":t.is_inbox?"mail":"archive"}determineDeleteStatus(t){return this.fileChanges.delete.includes(t)||t.is_trashed?"delete":""}setupFileChanges(){this.fileChanges.delete=[],this.fileChanges.archive.length>0&&this.fileChanges.skipped.length>0?(this.fileChanges.delete=this.hydrusFiles.filter(t=>!this.fileChanges.archive.map(n=>n.file_id).includes(t.file_id)),this.fileChanges.delete=this.fileChanges.delete.filter(t=>!this.fileChanges.skipped.map(n=>n.file_id).includes(t.file_id))):this.fileChanges.delete=this.fileChanges.archive.length>0?this.hydrusFiles.filter(t=>!this.fileChanges.archive.map(n=>n.file_id).includes(t.file_id)):this.fileChanges.skipped.length>0?this.hydrusFiles.filter(t=>!this.fileChanges.skipped.map(n=>n.file_id).includes(t.file_id)):this.hydrusFiles}submitFiles(){this.setupFileChanges(),this.updateFileStatuses(this.fileChanges)}updateFileStatuses(t){let n=t.archive.map(r=>r.file_id),s=t.delete.map(r=>r.file_id);n.length>0&&s.length>0?this.subscriptions.push((0,se.D)([this.apiService.archiveMultipleFilesById(n),this.apiService.deleteMultipleFilesById(s)]).subscribe({next:r=>{this.searchFiles()},error:r=>{console.log(r)}})):s.length>0?this.apiService.deleteMultipleFilesById(s).subscribe({next:r=>{this.searchFiles()},error:r=>{console.log(r)}}):n.length>0&&this.apiService.archiveMultipleFilesById(n).subscribe({next:r=>{this.searchFiles()},error:r=>{console.log(r)}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.F0),e.Y36(le.Dx),e.Y36(B.s),e.Y36(W),e.Y36(F),e.Y36(e.s_b),e.Y36(A.aV))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-archive-delete-filter-select-list"]],decls:22,vars:1,consts:[["fxLayout","column",1,"main-container"],["fxLayout","column","fxLayoutAlign","center center"],["fxLayout","row wrap","fxLayoutGap","20px"],["fxLayout","row wrap","fxLayoutAlign","center center","fxLayoutGap","5px"],["id","selected-color",1,"color-block"],["src","/assets/custom-icons/left-click.png",1,"mouse-button-icons"],["id","skip-color",1,"color-block"],["src","/assets/custom-icons/middle-click.png",1,"mouse-button-icons"],["id","delete-color",1,"color-block"],["src","/assets/custom-icons/no-click.png",1,"mouse-button-icons"],["fxLayout","row wrap","fxLayoutAlign","center center"],["class","file-filter-container","fxLayout","column",4,"ngFor","ngForOf"],["mat-flat-button","","color","primary",1,"submit-button",3,"click"],["fxLayout","column",1,"file-filter-container"],[3,"ngStyle","click","auxclick"],[3,"hydrusFile","heightNum","widthNum","thumbnail"],["mat-flat-button","","color","accent",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"p",4)(5,"img",5),e.TgZ(6,"p"),e._uU(7,"Archive"),e.qZA()(),e.TgZ(8,"div",3),e._UZ(9,"p",6)(10,"img",7),e.TgZ(11,"p"),e._uU(12,"Skip"),e.qZA()(),e.TgZ(13,"div",3),e._UZ(14,"p",8)(15,"img",9),e.TgZ(16,"p"),e._uU(17,"Delete"),e.qZA()()()(),e.TgZ(18,"div",10),e.YNc(19,pt,6,7,"div",11),e.qZA(),e.TgZ(20,"button",12),e.NdJ("click",function(){return n.submitFiles()}),e._uU(21," Submit "),e.qZA()()),2&t&&(e.xp6(19),e.Q6J("ngForOf",n.hydrusFiles))},dependencies:[c.sg,c.PC,d.lW,_.Hw,l.xw,l.SQ,l.Wh,D.Zl,he],styles:[".file-filter-container[_ngcontent-%COMP%]{margin:8px}.color-block[_ngcontent-%COMP%]{width:30px;height:5px}#selected-color[_ngcontent-%COMP%]{background-color:#00e676}#skip-color[_ngcontent-%COMP%]{background-color:#007ac1}#delete-color[_ngcontent-%COMP%]{background-color:transparent;border:1px solid black}.mouse-button-icons[_ngcontent-%COMP%]{width:auto;height:20px;position:relative;top:-5px}.submit-button[_ngcontent-%COMP%]{width:125px;color:#f5f5f5;text-shadow:0px 0px 1px black}.file-statuses[_ngcontent-%COMP%]{margin-left:auto;margin-right:25px;margin-bottom:-8px}"]}),i})();var $=a(5113),ue=a(9832),gt=a(5899),T=a(3075),pe=a(1159);class U{static getNamespace(o){return null!=o&&o.includes(":")?(o.startsWith("-")&&(o=o.substring(1)),o.split(":")[0].toLowerCase()):""}static getNamespaceNoSpace(o){return null!=o&&o.includes(":")?(o.startsWith("-")&&(o=o.substring(1)),o.split(":")[0].replace(/\s+/g,"-").toLowerCase()):""}static tagsObjectFromFile(o){var t;return null!==(t=o.service_names_to_statuses_to_display_tags)&&void 0!==t?t:o.service_names_to_statuses_to_tags}static AllTagsFromFile(o){return this.allKnownTags(this.tagsObjectFromFile(o))}static allKnownTags(o){return o&&"all known tags"in o&&"0"in o["all known tags"]?o["all known tags"][0]:[]}static namespaceTagFromFile(o,t){return U.AllTagsFromFile(o).find(n=>U.getNamespace(n)===t)}static getTagValue(o){return o&&(o.startsWith("-")&&(o=o.substring(1)),o.includes(":"))?o.split(":")[1].toLowerCase():o}}var g=(()=>{return(i=g||(g={})).fileSize="File Size",i.duration="Duration",i.importTime="Import Time",i.random="Random",i.lastViewedTime="Last Viewed Time",i.archiveTimestamp="Archive Timestamp",g;var i})();class L{static get getSortTypeArray(){return Object.values(g)}static get sortTypes(){return g}static findSortTypeInt(o){return this.sortTypeMap.get(o)}static getByValue(o){for(let[t,n]of L.sortTypeMap.entries())if(n===o)return t;return""}}L.sortTypeMap=new Map([[g.fileSize,0],[g.duration,1],[g.importTime,2],[g.random,4],[g.lastViewedTime,18],[g.archiveTimestamp,19]]);var de=a(7322),mt=a(4107),P=a(6688);const ft=["tagInput"];function _t(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-chip",12),e.NdJ("removed",function(){const r=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.removeSearchTag(r))}),e._uU(1),e.TgZ(2,"mat-icon",13),e._uU(3,"cancel"),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("selectable",!1)("removable",!0)("ngClass","tag-namespace-"+(n.tagUtils.getNamespaceNoSpace(t)?n.tagUtils.getNamespaceNoSpace(t):"default")),e.xp6(1),e.hij(" ",t," ")}}function vt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-option",14),e.NdJ("onSelectionChange",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.sortSelectionChange(s))}),e._uU(1),e.qZA()}if(2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}let yt=(()=>{class i{constructor(t){this.fileService=t,this.searchTags=[],this.separatorKeysCodes=[pe.K5,pe.OC],this.tagUtils=U,this.sortingUtils=L,this.tagCtrl=new T.NI,this.tags=new e.vpe,this.sortType=new e.vpe,this.sortDir=new e.vpe,this.sortTypes=this.sortingUtils.getSortTypeArray,this.selectedSort=this.sortingUtils.sortTypes.importTime,this.sortTypeNum=this.sortingUtils.findSortTypeInt(this.sortingUtils.sortTypes.importTime),this.selectedDir=!1}ngOnInit(){this.initalTags&&(this.searchTags=this.initalTags,this.tags.emit(this.searchTags)),this.initalSortType&&(this.sortTypeNum=this.initalSortType,this.selectedSort=this.sortingUtils.getByValue(this.initalSortType)),this.initalSortDir&&(this.selectedDir=this.initalSortDir)}chipInputEvent(t){const n=t.chipInput.inputElement,s=t.value.toLowerCase();this.addSearchTag(s),n&&(n.value=""),this.tagCtrl.setValue(null)}addSearchTag(t){const n=t.toLowerCase();(n||"").trim()&&this.searchTags.push(n),this.tags.emit(this.searchTags)}removeSearchTag(t){const n=this.searchTags.indexOf(t);n>=0&&this.searchTags.splice(n,1),this.tags.emit(this.searchTags)}selected(t){this.addSearchTag(t.option.viewValue),this.tagInput.nativeElement.value="",this.tagCtrl.setValue(null)}sortSelectionChange(t){t.isUserInput&&this.sortType.emit(this.sortingUtils.findSortTypeInt(t.source.value))}changeSortDirection(t){this.selectedDir=!this.selectedDir,this.sortDir.emit(this.selectedDir)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(W))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-search-tag-input"]],viewQuery:function(t,n){if(1&t&&e.Gf(ft,5),2&t){let s;e.iGM(s=e.CRH())&&(n.tagInput=s.first)}},inputs:{initalTags:"initalTags",initalSortType:"initalSortType",initalSortDir:"initalSortDir"},outputs:{tags:"tags",sortType:"sortType",sortDir:"sortDir"},decls:16,vars:7,consts:[["fxLayoutGap.lt-md","5px","fxLayoutAlign.lt-md","center start","fxLayout.lt-md","column","fxLayoutGap.gt-sm","10px","fxLayoutAlign.gt-sm","center center","fxLayout.gt-sm","row"],[1,"tag-form-field"],["aria-label","Tag Search"],["chipList",""],["class","tag-chip","color","primary",3,"selectable","removable","ngClass","removed",4,"ngFor","ngForOf"],["placeholder","Tag Search","matChipInputAddOnBlur","false",3,"matChipInputFor","matChipInputSeparatorKeyCodes","formControl","matChipInputTokenEnd"],["tagInput",""],["fxLayout","row","fxLayoutGap","10px"],["appearance","outline"],[1,"selection-text",3,"value","valueChange"],["class","option-container",3,"value","onSelectionChange",4,"ngFor","ngForOf"],["mat-flat-button","",1,"sort-direction-button",3,"click"],["color","primary",1,"tag-chip",3,"selectable","removable","ngClass","removed"],["matChipRemove",""],[1,"option-container",3,"value","onSelectionChange"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"mat-form-field",1)(2,"mat-chip-list",2,3),e.YNc(4,_t,4,4,"mat-chip",4),e.TgZ(5,"input",5,6),e.NdJ("matChipInputTokenEnd",function(r){return n.chipInputEvent(r)}),e.qZA()()(),e.TgZ(7,"div",7)(8,"mat-form-field",8)(9,"mat-label"),e._uU(10,"Sort Filter"),e.qZA(),e.TgZ(11,"mat-select",9),e.NdJ("valueChange",function(r){return n.selectedSort=r}),e.YNc(12,vt,2,2,"mat-option",10),e.qZA()(),e.TgZ(13,"button",11),e.NdJ("click",function(r){return n.changeSortDirection(r)}),e.TgZ(14,"mat-icon"),e._uU(15),e.qZA()()()()),2&t){const s=e.MAs(3);e.xp6(4),e.Q6J("ngForOf",n.searchTags),e.xp6(1),e.Q6J("matChipInputFor",s)("matChipInputSeparatorKeyCodes",n.separatorKeysCodes)("formControl",n.tagCtrl),e.xp6(6),e.Q6J("value",n.selectedSort),e.xp6(1),e.Q6J("ngForOf",n.sortTypes),e.xp6(3),e.Oqu(n.selectedDir?"south":"north")}},dependencies:[c.mk,c.sg,d.lW,de.KE,de.hX,mt.gD,Y.ey,_.Hw,P.qn,P.HS,P.oH,P.qH,l.xw,l.SQ,l.Wh,D.oO,T.Fj,T.JJ,T.oH],styles:[".tag-form-field[_ngcontent-%COMP%]{width:100%}.tag-namespace-series[_ngcontent-%COMP%]{background-color:#a0a}.tag-namespace-system[_ngcontent-%COMP%]{background-color:#996515}.tag-namespace-meta[_ngcontent-%COMP%]{background-color:#000}.tag-namespace-creator[_ngcontent-%COMP%]{background-color:#a00}.tag-namespace-studio[_ngcontent-%COMP%]{background-color:maroon}.tag-namespace-character[_ngcontent-%COMP%]{background-color:#0a0}.tag-namespace-person[_ngcontent-%COMP%]{background-color:green}.tag-namespace-default[_ngcontent-%COMP%]{background-color:#006ffa}.option-container[_ngcontent-%COMP%], .selection-text[_ngcontent-%COMP%]{text-align:center!important}.sort-direction-button[_ngcontent-%COMP%]{height:55px;width:55px;background-color:#62757f6e}"]}),i})();function Ct(i,o){1&i&&(e.TgZ(0,"p",16),e._uU(1," Processing Filter... "),e.qZA())}function xt(i,o){if(1&i&&(e.TgZ(0,"div",13),e._UZ(1,"mat-progress-bar",14),e.YNc(2,Ct,2,0,"p",15),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.processing)}}function Ft(i,o){if(1&i&&(e.TgZ(0,"div",19),e._UZ(1,"app-image-display",20),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("hydrusFile",t)("widthNum","265")("heightNum","230")("thumbnail",!0)}}function bt(i,o){if(1&i&&(e.TgZ(0,"div",17),e.YNc(1,Ft,2,4,"div",18),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.hydrusFiles)}}let Tt=(()=>{class i{constructor(t,n,s,r,m,C,E,S){this.apiService=n,this.fileService=s,this.router=r,this.breakpointObserver=m,this.injectorService=S,this.loading=!0,this.processing=!1,this.mobileView=!1,this.sortType=2,this.sortDir=!0,this.subscriptions=[],this.hydrusFiles=[],this.recentlyChangedFileIds=[],this.continueFilter=!1,this.initalTags=["system:limit = 35","system:inbox"],this.searchTags=this.initalTags,this.overlayUtil=new ae(C,E),this.filterStyle="select-list",t.setTitle("File Search | "+re.N.app_name),this.breakpointObserver.observe([$.u3.Handset,$.u3.Tablet]).subscribe({next:f=>{f.matches&&(this.mobileView=!0,this.filterStyle="full-screen")}}),this.subscriptions.push(this.router.events.subscribe(f=>{var x;if(f instanceof p.m2&&f.url.includes("?")){this.searchParams=new URLSearchParams(f.url.slice(f.url.indexOf("?"))),this.saveSearchParams();let O=null===(x=this.searchParams.get("tags"))||void 0===x?void 0:x.split(",");O&&(this.searchTags=O);let w=this.searchParams.get("sortType");w&&(this.sortType=+w),"false"===this.searchParams.get("sortDir")&&(this.sortDir=!1)}}))}ngOnDestroy(){this.subscriptions.forEach(t=>{t.unsubscribe()})}ngOnInit(){}tagsChanged(t){this.searchTags=t,this.hydrusFiles=[],this.searchFiles()}sortTypeChanged(t){this.sortType=t,this.searchFiles()}sortDirChanged(t){this.sortDir=t,this.searchFiles()}searchFiles(){this.loading=!0,this.hydrusFiles=[],this.subscriptions.push(this.fileService.getFileWithMetadataFromSearch(this.searchTags,this.sortType.toString(),this.sortDir.toString()).subscribe({next:t=>{this.hydrusFiles=t,this.loading=!1,this.continueFilter&&setTimeout(()=>this.injectorService.announceFullscreenOverlay({files:this.hydrusFiles,currentIndex:0}),300)}})),this.setSearchParams(),this.saveSearchParams()}deleteFile(t){this.apiService.deleteFileById(t).subscribe({next:n=>{}})}startFilter(){this.mobileView?this.overlayUtil.createMobileOverlay():"full-screen"===this.filterStyle?this.overlayUtil.createFullscreenOverlay():"select-list"===this.filterStyle&&this.router.navigate(["/archive-delete-filter-selection"],{state:{files:this.hydrusFiles,tags:this.searchTags,sortDir:this.sortDir,sortType:this.sortType}}),"full-screen"===this.filterStyle&&(setTimeout(()=>this.injectorService.announceFullscreenOverlay({files:this.hydrusFiles,currentIndex:0}),300),this.subscriptions.push(this.injectorService.sendFilesSourceFound$.subscribe(t=>{t.continueFilter?this.continueFilter=!0:(this.overlayUtil.closeOverlay(),this.continueFilter=!1),t.makeChanges?this.updateFileStatuses(t.files):console.log("no changes")})))}setSearchParams(){let t=`?tags=${this.searchTags.flat()}&sortType=${this.sortType}&sortDir=${this.sortDir}`;this.searchParams=new URLSearchParams(t)}saveSearchParams(){var t=window.location.pathname+"?"+this.searchParams.toString();history.pushState(null,"",t)}updateFileStatuses(t){this.loading=!0,this.processing=!0;let n=t.archive.map(r=>r.file_id),s=t.delete.map(r=>r.file_id);this.recentlyChangedFileIds=n.concat(s),n.length>0&&s.length>0?this.subscriptions.push((0,se.D)([this.apiService.archiveMultipleFilesById(n),this.apiService.deleteMultipleFilesById(s)]).subscribe({next:r=>{this.processing=!1,this.searchFiles()},error:r=>{console.log(r)}})):s.length>0?this.apiService.deleteMultipleFilesById(s).subscribe({next:r=>{this.processing=!1,this.searchFiles()},error:r=>{console.log(r)}}):n.length>0&&this.apiService.archiveMultipleFilesById(n).subscribe({next:r=>{this.processing=!1,this.searchFiles()},error:r=>{console.log(r)}})}viewRecentlyChanged(){console.log(this.recentlyChangedFileIds)}noRecentlyChangedFiles(){return!(this.recentlyChangedFileIds.length>0)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(le.Dx),e.Y36(B.s),e.Y36(W),e.Y36(p.F0),e.Y36($.Yg),e.Y36(e.s_b),e.Y36(A.aV),e.Y36(F))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-file-search"]],decls:16,vars:6,consts:[[1,"main-container"],["fxLayout","column"],[1,"tag-input",3,"initalTags","initalSortDir","initalSortType","tags","sortType","sortDir"],["id","dark-mode-divider","fxHide","","fxShow.lt-md",""],["fxLayout.gt-sm","row","fxLayoutGap","10px","fxLayout.lt-md","column","fxLayoutAlign.lt-md","center center"],["mat-flat-button","","color","primary",1,"filter-button",3,"click"],["fxShow","","fxHide.lt-md",""],["aria-label","Filter Selection Type",3,"ngModel","ngModelChange"],["value","select-list"],["value","full-screen"],[1,"content-container"],["fxLayout","column","class","loading-container",4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","center center",4,"ngIf"],["fxLayout","column",1,"loading-container"],["mode","indeterminate"],["matLine","","class","processing-text",4,"ngIf"],["matLine","",1,"processing-text"],["fxLayout","row wrap","fxLayoutAlign","center center"],["class","files-container",4,"ngFor","ngForOf"],[1,"files-container"],[3,"hydrusFile","widthNum","heightNum","thumbnail"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"app-search-tag-input",2),e.NdJ("tags",function(r){return n.tagsChanged(r)})("sortType",function(r){return n.sortTypeChanged(r)})("sortDir",function(r){return n.sortDirChanged(r)}),e.qZA(),e._UZ(3,"mat-divider",3),e.TgZ(4,"div",4)(5,"button",5),e.NdJ("click",function(){return n.startFilter()}),e._uU(6," Send to Archive/Delete Filter "),e.qZA(),e.TgZ(7,"section",6)(8,"mat-button-toggle-group",7),e.NdJ("ngModelChange",function(r){return n.filterStyle=r}),e.TgZ(9,"mat-button-toggle",8),e._uU(10,"Select List"),e.qZA(),e.TgZ(11,"mat-button-toggle",9),e._uU(12,"Full Screen"),e.qZA()()()()(),e.TgZ(13,"div",10),e.YNc(14,xt,3,1,"div",11),e.YNc(15,bt,2,1,"div",12),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("initalTags",n.initalTags)("initalSortDir",n.sortDir)("initalSortType",n.sortType),e.xp6(6),e.Q6J("ngModel",n.filterStyle),e.xp6(6),e.Q6J("ngIf",n.loading),e.xp6(1),e.Q6J("ngIf",n.hydrusFiles&&!n.loading))},dependencies:[c.sg,c.O5,d.lW,Y.X2,y.d,ue.A9,ue.Yi,gt.pW,l.xw,l.SQ,l.Wh,D.b8,T.JJ,T.On,he,yt],styles:[".archive-delete-disabled[_ngcontent-%COMP%]{color:red}.archive-delete-enabled[_ngcontent-%COMP%]{color:green}.files-container[_ngcontent-%COMP%]{margin:10px}.image-container[_ngcontent-%COMP%]{width:500px;height:auto}.filter-button[_ngcontent-%COMP%]{width:250px;color:#f5f5f5}.image-list-image[_ngcontent-%COMP%]{width:100%;height:100%;background-repeat:no-repeat!important;background-position:center!important;background-size:cover!important;animation:fadeIn ease .5s;background-color:#c7c5cb}.grid-item[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{-webkit-tap-highlight-color:transparent}.processing-text[_ngcontent-%COMP%]{text-align:center;margin-top:25px;font-size:25px}.loading-container[_ngcontent-%COMP%]{margin-top:15px}"]}),i})();var K=a(5826),Ot=a(5928),G=a(2181),wt=a(4594);function At(i,o){if(1&i&&(e.TgZ(0,"a",13,14),e._uU(2),e.qZA()),2&i){const t=o.$implicit;e.Q6J("routerLink",t.path),e.xp6(2),e.hij(" ",t.label," ")}}function St(i,o){if(1&i&&(e.TgZ(0,"div",15),e._UZ(1,"img",16),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("src",t.userAvatar,e.LSH)}}function Zt(i,o){1&i&&(e.TgZ(0,"mat-icon",17),e._uU(1,"admin_panel_settings"),e.qZA())}function It(i,o){if(1&i&&(e.TgZ(0,"div")(1,"a",18),e._uU(2),e.qZA(),e._UZ(3,"mat-divider",19),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("routerLink",t.path),e.xp6(1),e.Oqu(t.label)}}let Mt=(()=>{class i{constructor(t,n){this.router=n,this.navLinks=[{path:"file-search",label:"Search"}],this.panelLinks=[{path:"",label:""}],this.loading=!0,this.lastUpdated=new Date,this.loginUtil=Ot.t,this.dialogUtils=new H(t)}ngOnInit(){}logoutUser(){this.loginUtil.clearStorage(),this.router.navigate(["/login"])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(h.uw),e.Y36(p.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-toolbar"]],decls:17,vars:5,consts:[[1,"toolbar-container"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","65px"],["mat-list-item","","routerLinkActive","","class","nav-links",3,"routerLink",4,"ngFor","ngForOf"],[1,"toolbar-spacer"],["fxLayoutGap","35px","fxLayout","row","fxLayoutAlign","center center"],["mat-icon-button","",1,"panel-settings-button",3,"matMenuTriggerFor"],["fxLayoutAlign","center center",4,"ngIf","ngIfElse"],["adminPanel",""],["fxLayoutAlign","center center",1,"panel-settings-menu"],["otherMenus","matMenu"],[4,"ngFor","ngForOf"],["mat-menu-item","","fxLayoutAlign","space-between center","fxLayout","row"],["mat-icon-button","",1,"logout-button",3,"click"],["mat-list-item","","routerLinkActive","",1,"nav-links",3,"routerLink"],["rla","routerLinkActive"],["fxLayoutAlign","center center"],["id","mat-icon-32",1,"user-avatar",3,"src"],["id","mat-icon-32"],["mat-menu-item","",3,"routerLink"],["id","dark-mode-divider"]],template:function(t,n){if(1&t&&(e.TgZ(0,"mat-toolbar",0)(1,"div",1),e.YNc(2,At,3,2,"a",2),e.qZA(),e._UZ(3,"span",3),e.TgZ(4,"div",4)(5,"div")(6,"button",5),e.YNc(7,St,2,1,"div",6),e.YNc(8,Zt,2,0,"ng-template",null,7,e.W1O),e.qZA(),e.TgZ(10,"mat-menu",8,9),e.YNc(12,It,4,2,"div",10),e.TgZ(13,"div",11)(14,"button",12),e.NdJ("click",function(){return n.logoutUser()}),e.TgZ(15,"mat-icon"),e._uU(16,"logout"),e.qZA()()()()()()()),2&t){const s=e.MAs(9),r=e.MAs(11);e.xp6(2),e.Q6J("ngForOf",n.navLinks),e.xp6(4),e.Q6J("matMenuTriggerFor",r),e.xp6(1),e.Q6J("ngIf",n.userAvatar)("ngIfElse",s),e.xp6(5),e.Q6J("ngForOf",n.panelLinks)}},dependencies:[c.sg,c.O5,p.yS,p.Od,d.lW,G.VK,G.OP,G.p6,v.Tg,y.d,wt.Ye,_.Hw,l.xw,l.SQ,l.Wh],styles:[".nav-links[_ngcontent-%COMP%]{font-size:31px;text-decoration:none}.nav-links[_ngcontent-%COMP%], .toolbar-icons[_ngcontent-%COMP%], .span-text[_ngcontent-%COMP%]{color:#f5f5f5}.toolbar-container[_ngcontent-%COMP%]{background-color:#1565c0;padding-right:20px;padding-left:20px;border-bottom:whitesmoke 1px solid}.toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.storage-container[_ngcontent-%COMP%]{margin-right:70px}.storage-icon[_ngcontent-%COMP%]{color:#81d4fa}.loading-icon[_ngcontent-%COMP%], .span-text-loading[_ngcontent-%COMP%]{color:#1b1b1b;text-shadow:1px 1px 1px rgba(245,245,245,.241)!important}.vertical-divider[_ngcontent-%COMP%]{height:35px;margin-left:30px;margin-right:30px;border-width:2px!important;border-color:#fff}.panel-settings-button[_ngcontent-%COMP%]{color:#e3f2fd;text-shadow:1px 1px 1px black}.warning-icon-button[_ngcontent-%COMP%]{text-shadow:1px 1px 1px black}.menu-item[_ngcontent-%COMP%]{margin:0 0 16px;padding:0 16px}.version-text[_ngcontent-%COMP%]{margin:0 0 -2px}.menu-item-text[_ngcontent-%COMP%]{margin-top:-15px}.no-vpn-text[_ngcontent-%COMP%]{color:#ff4500!important;text-shadow:0px 0px 1px black}.server-info-menu-item[_ngcontent-%COMP%]{height:130px}.info-menu-line[_ngcontent-%COMP%]{margin-top:-20px}.span-text[_ngcontent-%COMP%]{margin-left:5px}.logout-button[_ngcontent-%COMP%]{float:right}.user-avatar[_ngcontent-%COMP%]{border-radius:50%}"]}),i})();function kt(i,o){1&i&&e._UZ(0,"app-toolbar")}const Ut=[{path:"",canActivateChild:[K.a],component:(()=>{class i{constructor(t,n){this.injectorService=t,this.cdr=n,this.showToolbar=!0,this.subscriptions=[]}ngAfterViewInit(){}ngOnInit(){}ngOnDestroy(){this.subscriptions.forEach(t=>{t.unsubscribe()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F),e.Y36(e.sBO))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-home"]],decls:2,vars:1,consts:[[4,"ngIf"]],template:function(t,n){1&t&&(e.YNc(0,kt,1,0,"app-toolbar",0),e._UZ(1,"router-outlet")),2&t&&e.Q6J("ngIf",n.showToolbar)},dependencies:[c.O5,p.lC,Mt]}),i})(),children:[{path:"",redirectTo:"file-search",pathMatch:"full"},{path:"file-search",canActivate:[K.a],component:Tt},{path:"archive-delete-filter-selection",canActivate:[K.a],component:dt}]}];let Lt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.Bz.forChild(Ut),p.Bz]}),i})(),Pt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[c.ez,Lt,fe.o]}),i})()}}]);